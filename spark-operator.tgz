SPARK_OPERATOR_HELM_REPO_LOCATION=https://googlecloudplatform.github.io/spark-on-k8s-operator
SPARK_OPERATOR_HELM_CHART_RELEASE=sparkoperator
SPARK_OPERATOR_HELM_REPO=spark-operator
SPARK_OPERATOR_HELM_NAMESPACE=spark-operator
SPARK_APPS_K8S_NAMESPACE=datalake-namespace

helm repo list
helm repo remove ${SPARK_OPERATOR_HELM_REPO}
helm repo add ${SPARK_OPERATOR_HELM_REPO} ${SPARK_OPERATOR_HELM_REPO_LOCATION}
helm repo update

helm install ${SPARK_OPERATOR_HELM_CHART_RELEASE} \
    --namespace ${SPARK_OPERATOR_HELM_NAMESPACE} \
    --create-namespace \
    --set sparkJobNamespace=${SPARK_APPS_K8S_NAMESPACE} \
    --set webhook.enable=true \
    --set serviceAccounts.spark.name=spark-sa \
    --set serviceAccounts.sparkoperator.name=spark-operator-sa \
    spark-operator/spark-operator